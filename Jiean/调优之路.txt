2013.10.24
现场：一个取可用库存的存储过程，在查询分析器里执行正常，但在程序里调用却非常慢。

分析：从跟踪日志分析后，定位在其中一个函数取数据非常耗时，cpu,io时间都很高，没有等待和死锁情况，说明sqlserver是在全力执行这个函数的。
把这个函数重新编译下，情况好转。

问题：
1）为什么在查询分析器里执行很快，在程序里却很慢。
2)为什么重编译会改善这种情况。

